FROM python:3.6.10

RUN cd /tmp && wget https://github.com/cve-search/cve-search/archive/master.tar.gz
RUN cd /tmp && \
    tar xvzf master.tar.gz && \
    mv cve-search-master /app && \
    chown 1000:1000 /app -R
RUN rm /tmp/*.tar.gz

RUN cd /app && pip3 install -r requirements.txt

COPY docker-entrypoint.sh /app/entrypoint.sh

USER 1000
EXPOSE 5000

ENTRYPOINT ["/app/entrypoint.sh"]
