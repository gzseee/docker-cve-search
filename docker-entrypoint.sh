#!/bin/bash

cd /app

echo "
[Redis]
Host: $REDIS_HOST
Password: $REDIS_PASSWORD
Port: 6379
VendorsDB: 10
NotificationsDB: 11
RefDB: 12

[Mongo]
Host: $MONGODB_HOST
Port: 27017
DB: $MONGODB_DATABASE
Username: $MONGODB_USERNAME
Password: $MONGODB_PASSWORD

[dbmgt]
Tmpdir: ./tmp/

[FulltextIndex]
Indexdir: ./indexdir/

[Webserver]
Host: 0.0.0.0
Port: 5000
Debug: False
PageLength: 50
LoginRequired: False
SSL: False
Certificate: ssl/cve-search.crt
Key: ssl/cve-search.key

[Logging]
Logging: False
Logfile: log/cve-search.log
MaxSize: 150MB
Backlog: 5

[Proxy]
http:
IgnoreCerts: False

[CVE]
StartYear: 2002
" > ./etc/configuration.ini

python3 ./sbin/db_mgmt_cpe_dictionary.py -p
python3 ./sbin/db_mgmt_json.py -p
python3 ./sbin/db_updater.py

python3 ./web/index.py
